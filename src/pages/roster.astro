---
import BaseLayout from "../layouts/BaseLayout.astro";
import Header from "../components/Header.astro";
import Footer from "../components/Footer.astro";
import PlayerCard from "../components/PlayerCard.astro";
import { getCollection } from "astro:content";
import { getClubFromRequest } from "../utils/getClubFromRequest";

const club = getClubFromRequest(Astro.request);

const players = (await getCollection("players"))
    .filter((p) => p.data.club === club)
    .sort((a, b) => a.data.number - b.data.number);
---

<BaseLayout
    title={`${club === "galacticosc" ? "Galactico SC" : "Aces FC"} Roster`}
    description="Meet the players."
>
    <Header />

    <main class="px-4 py-12">
        <h1 class="font-heading text-3xl uppercase mb-6">
            {club === "galacticosc" ? "Galactico SC Roster" : "Aces FC Roster"}
        </h1>

        <section class="grid grid-cols-2 gap-4 sm:grid-cols-3 md:grid-cols-4">
            {players.map((player) => <PlayerCard player={player} />)}
        </section>
    </main>

    <Footer />
</BaseLayout>
